{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["import { showHUD, LaunchProps, open, getApplications, Toast, showToast } from \"@raycast/api\";\n\ninterface FocusArguments {\n  commitment: string;\n}\n\nconst encode = (str: string): string => Buffer.from(str, \"binary\").toString(\"base64\");\n\nexport default async function main(props: LaunchProps<{ arguments: FocusArguments }>) {\n  const { commitment } = props.arguments;\n\n  if ((await checkBundleInstallation(\"com.ashleyhindle.focusanchor\")) === false) {\n    return false; // We need to return false so the Raycast window doesn't disappear and the user doesn't see the Toast\n  }\n\n  await open(\"focusanchor://setCommitment/\" + encode(commitment)).catch((error) => {\n    showHUD(`Failed to set your Focus: ${error}`);\n  });\n}\n\nasync function isBundleInstalled(appBundleId: string): Promise<boolean> {\n  const applications = await getApplications();\n  return applications.some(({ bundleId }) => bundleId === appBundleId);\n}\n\nasync function checkBundleInstallation(appBundleId: string): Promise<boolean> {\n  const isInstalled = await isBundleInstalled(appBundleId);\n  if (isInstalled === false) {\n    const installUrl = \"https://focusanchor.com\";\n    const options: Toast.Options = {\n      style: Toast.Style.Failure,\n      title: \"Focus Anchor isn't installed.\",\n      message: `Install it from: ${installUrl}`,\n      primaryAction: {\n        title: `Go to download page`,\n        onAction: () => {\n          open(installUrl);\n        },\n      },\n    };\n\n    await showToast(options);\n    return false;\n  }\n\n  return true;\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA8E,wBAMxEC,EAAUC,GAAwB,OAAO,KAAKA,EAAK,QAAQ,EAAE,SAAS,QAAQ,EAEpF,eAAOJ,EAA4BK,EAAmD,CACpF,GAAM,CAAE,WAAAC,CAAW,EAAID,EAAM,UAE7B,GAAK,MAAME,EAAwB,8BAA8B,IAAO,GACtE,MAAO,GAGT,QAAM,QAAK,+BAAiCJ,EAAOG,CAAU,CAAC,EAAE,MAAOE,GAAU,IAC/E,WAAQ,6BAA6BA,GAAO,CAC9C,CAAC,CACH,CAEA,eAAeC,EAAkBC,EAAuC,CAEtE,OADqB,QAAM,mBAAgB,GACvB,KAAK,CAAC,CAAE,SAAAC,CAAS,IAAMA,IAAaD,CAAW,CACrE,CAEA,eAAeH,EAAwBG,EAAuC,CAE5E,GADoB,MAAMD,EAAkBC,CAAW,IACnC,GAAO,CACzB,IAAME,EAAa,0BACbC,EAAyB,CAC7B,MAAO,QAAM,MAAM,QACnB,MAAO,gCACP,QAAS,oBAAoBD,IAC7B,cAAe,CACb,MAAO,sBACP,SAAU,IAAM,IACd,QAAKA,CAAU,CACjB,CACF,CACF,EAEA,eAAM,aAAUC,CAAO,EAChB,EACT,CAEA,MAAO,EACT",
  "names": ["src_exports", "__export", "main", "__toCommonJS", "import_api", "encode", "str", "props", "commitment", "checkBundleInstallation", "error", "isBundleInstalled", "appBundleId", "bundleId", "installUrl", "options"]
}
