"use strict";var d=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var j=(o,t)=>{for(var s in t)d(o,s,{get:t[s],enumerable:!0})},O=(o,t,s,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of x(t))!C.call(o,i)&&i!==s&&d(o,i,{get:()=>t[i],enumerable:!(u=S(t,i))||u.enumerable});return o};var b=o=>O(d({},"__esModule",{value:!0}),o);var J={};j(J,{default:()=>F});module.exports=b(J);var r=require("@raycast/api");var w=require("@raycast/api"),h=require("path"),g=require("fs/promises"),y=require("child_process");async function B(o,...t){let s=(0,h.join)(w.environment.assetsPath,"compiled_raycast_swift/QuitAllButFocused");return await(0,g.chmod)(s,"755"),new Promise((u,i)=>{let f=[o];for(let e of t)try{f.push(JSON.stringify(e,(n,a)=>a===void 0?null:a))}catch(n){i(new l("Failed to serialize input to JSON: "+n.message));return}let m=(0,y.spawn)(s,f),c=[],p=[];m.stdout?.on("data",e=>{c.push(e.toString())}),m.stderr?.on("data",e=>{p.push(e.toString())}),m.on("exit",e=>{if(e===0)try{let n=c.join("").trim();n.length!=0?u(JSON.parse(n)):u(null)}catch(n){let a=new l("Failed to deserialize result from JSON: "+n.message);a.stdout=c.join("").trim(),a.stderr=p.join("").trim(),i(a)}else{let n=new l(p.join("").trim()||c.join("").trim()||"Could not get any data");n.stdout=c.join("").trim(),n.stderr=p.join("").trim(),i(n)}}),m.on("error",e=>{i(e)})})}async function A(){return await B("quitButFront")}var l=class extends Error{constructor(t){super(t),this.name="SwiftError"}};async function F(){let o=await(0,r.getFrontmostApplication)(),t={title:"Quit all apps but "+o.name,icon:{source:r.Icon.Warning,tintColor:r.Color.Red},message:"You will not be able to undo this action.",rememberUserChoice:!0,primaryAction:{title:"Do It",style:r.Alert.ActionStyle.Destructive}};await(0,r.confirmAlert)(t)?(await A(),await(0,r.showHUD)("Closing all apps except: "+o.name)):await(0,r.showHUD)("Canceled")}
